define(["jquery","backbone"],function(e,o){return o.View.extend({events:{"click .follow":"followuser","click .unfollow":"unfollowuser"},initialize:function(){this.listenTo(this.model,"change",this.render,this)},unfollowuser:function(e){e.preventDefault(),this.model.set({is_following:!1}),this.model.save(this.model.changedAttributes(),{patch:!0,wait:!0,fail:function(e){console.log(e)}})},followuser:function(e){e.preventDefault(),this.model.set({is_following:!0}),this.model.save(this.model.changedAttributes(),{patch:!0,wait:!0,fail:function(e){console.log(e)}})},detailLink:function(e){e.preventDefault(),console.log("detail link clicked")},render:function(){var e=this.model.toJSON();e.author={nickname:e.nickname};var o=e.followers,n=e.followed;e.followers={count:function(){return o}},e.followed={count:function(){return n}};var t={};return t.user={},t.user.is_following=function(){return e.is_following},this.$el.html(""),this.$el.html(window.env.render("person.html",{post:e,g:t,momentjs:moment})),this}})});